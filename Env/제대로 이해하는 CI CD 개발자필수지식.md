## 파이프라인

- 코드 구축부터 시작해서 배포까지 일련의 과정들을 CI/CD 파이프라인이라고 합니다.

- 총 3가지의 단계로 구성됩니다.

<img src='./images/제대로 이해하는 CI CD 개발자필수지식/01.png'>

- continuous integration : 코드를 빌드하고 테스트하고 합칩니다.

- continuous delivery : 해당 레포지토리에 릴리즈 합니다. (즉, master 브랜치에 작업한 브랜치를 머지하는 것)

- continuous deployment : 이를 프로덕션, 즉 실제 서비스에 배포합니다.

<br/>

- 파이프라인이 주는 장점은 코드배포까지 좀 더 체계적으로 만드는 점과 테스트가 강제된다는 점입니다.

- 파이프라인 자체내에 테스트가 있기 때문에 테스터 없으면 코드 머지자체가 안되게 만들 수도 있기 때문이죠

<br/>

## 빌드

- 대표적인 빌드 도구의 예로 웹팩이 있다.

- Next.js 환경에서 tsx, jsx로 작성하는 이러한 확장자의 파일들은 브라우저에서 실행할 수 없다.

- 브라우저에서 실행할 수 있는 파일은 Html, JavaScript, CSS 같은 파일

- npm run build를 하면 웹팩으로 브라우저가 이해할 수 있는 결과물로 번들링이 되는데 그 결과물을 .next 폴더에서 확인할 수 있다

<br/>

## 테스트

- 테스트는 함수 등 작은 단위를 테스팅 하는 단위테스트, 모듈을 통합할 때 테스트하는 통합테스트, 사용자가 서비스를 사용하는 상황을 가정해서 테스트하는 엔드 투 엔드 테스트가 대표적이다.

- 이 외에도 보안 테스트라는 것도 있는데 규모가 큰 곳에서는 도입을 하고, 그렇지 않다면 현실적으로 도입하기는 힘들다

<br/>

## 머지

- git을 통해서 머지 한다

- 중요한 것은 충돌을 최소화시키는 것.

- **충돌이라는 것은 대부분 일어나기 땜누에 조금 더 작은 단위로 충돌이 일어나게 하는게 중요**

- 한달동안 코드를 짜서 배포하는게 아니라 작은 이슈단위로 나눠서 보통 머지를 한다.

- 그렇다고해서 너무 아토믹 하게 작은 단위로 하지는 않고 작은 issue 단위를 기반으로 머지를 하게 된다.

- 만약 충돌시에는 서로 화면공유를 하면서 합의하에 충돌을 해결하는게 제일 좋다.

<br/>

## 배포

- 배포는 그저 사용자를 위한 서비스를 배포할 수도 있다고 생각할 수 있겠지만 그 뿐만이 아닌 내부적으로 QA엔지니어나 관리페이지를 위한 배포, 데이터웨어하우스로부터 데이터를 가공해서 백엔드 개발자를 위한 배포등을 포함합니다.

<br/>

## 툴

- github action, jenkins, circle ci가 유명하며 heroku를 통해 CI, CD 설정 없이 자동가능

- 참고로 heroku + github action으로 설정도 가능

---

## Refeference

- [제대로 이해하는 CI / CD | 개발자필수지식](https://www.youtube.com/watch?v=KTHZyV9yJGY&t=986s)
