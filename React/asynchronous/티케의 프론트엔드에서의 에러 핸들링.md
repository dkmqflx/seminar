- 순서는 다음과 같이 진행된다.

1. 용어 정리

2. 에러 핸들링이 필요한 이유

3. 에러의 분류

4. 에러 핸들링 예시

5. 에러핸들링에 대한 고찰

---

## 1. 용어 정의

### 오류(에러)란 ?

- 실패, 실수 또는 오차

- 하드웨어의 고장 또는 **소프트웨어가 본래의 동작을 할 수 없는 상태**

- 소프트웨어의 오류는 발생 시점에 따라 컴파일 오류, 런타임 오류로 나눌 수 있다

- 컴파일 오류

  - 코드가 컴파일 될 때 컴파일러가 해석하지 못해서 발생

- 런타임 오류

  - 프로그램이 동작할 때 발견할 수 있는 에러

  - try, catch에서 잡을 수 있는 에러로

  - 자바스크립트에서는 런타임 에러를 예외라고 부른다

<br/>

- 자바스크립트

  - dynamically typed language로

  - 모든 에러가 컴파일 단계가 아니라 런타임 환경에서 발생한다

  - 따라서 최악의 경우 사용자가 어플리케이션을 사용하면서 에러를 마주칠 수 있다

  - 이러한 문제를 타입스크립트로 해결할 수 있다

- 타입스크립트

  - statically typed language로

  - Typescript를 제대로 활용하면 런타임 전에 미리 알 수 있는 오류도 있다

### 예외란 ?

- 일반적인 규칠이나 정례에서 벗어나는 일

- 런타임 오류와 관련된 것으로 예상하기 어렵거나 예상이 불가능한 이슈를 의미

- 이러한 에러가 발생하면 자바스크립트에서는 에러 객체를 내보내고, 처리를 않으면 프로그램은 종료된다

- 오류가 발생할 수도 있고 아닐 수도 있는 것을 '예외' 구문으로 처리하여 프로그램이 예상치 못하게 종료되거나 제 기능을 못하는 것을 방지

- 예외로 인해 발생한 **Error 객체**를 핸들링하는 것을 **에러 핸들링**이라고 한다

- 자바스크립트에서 런타임 환경에서의 에러 -> **예외**

---

## 2. 에러 핸들링이 필요한 이유

- 에러에 대한 인지 시키기고 다른 행동을 할 수 있도록 유도한다

- 이를 통해서 서비스에 대한 부정적인 경험을 막는다

- 에러 처리를 통해 서비스의 트랜잭션에 영향을 미쳐 장애를 일으킬 수 있는 상황이 발생하는 것 막을 수 있다

---

## 3. 에러의 분류

<img src='./images/티케의 프론트엔드에서의 에러 핸들링/02.png'>

- 예상이 가능한 에러와 예상이 불가능한 에러에 초점을 맞춰보면 다음과 같이 나눌 수 있다

<img src='./images/티케의 프론트엔드에서의 에러 핸들링/03.png'>

- 이러한 에러를 처리할 수 있는 방법은 다음과 같다

<img src='./images/티케의 프론트엔드에서의 에러 핸들링/04.png'>

---

## 4. 에러핸들링 예시

- api 통해 통신할 때 상태 코드를 통해서 예외 상황을 구분할 수 있다

- 하지만 하나의 상태 코드에 다양한 상황이 있을 수 있다

- 이 때 에러코드 에러 메세지를 통해 보다 명확한 에러 발생 원인을 알려줄 수 있다

- 에러코드는 보통 상태 코드와 다른 커스텀한 문자열 또는 번호를 의미한다

- 대표적으로 페이스북의 예시를 보면 다음과 같다

<img src='./images/티케의 프론트엔드에서의 에러 핸들링/05.png'>

- Access token이 없는 페이스북에 요청을 하는 경우 다음과 같이 400 에러와 함께 에러 타입, 메세지, 코드 그리고 특정한 키 값이 오고 있다

- [페이스북 개발자 홈페이지](https://developers.facebook.com/docs/graph-api/guides/error-handling/)에 가면 오류 응답에 관한 컨벤션을 볼 수 있다.

- 비슷하게 없는 페이지에 사용자가 접근할 때 404 페이지를 보여주거나 다른 페이지로 리다이렉트 시켜줄 수 있다

---

## 4. 에러핸들링 예시

- 예상치 못한 에러인 경우에는 다음과 같이 에러를 처리해준다

<img src='./images/티케의 프론트엔드에서의 에러 핸들링/06.png'>

- 일시적인 에러라면 일시적 에러임을 알려주고

- 만약 사용자 입장에서 빠르게 해결하지 못하는 경우에는 고객센터로 문의할 수 있는 경로를 열어주는 것도 방법이다

- 개발작 입장에서도 주기적인 모니터링을 통해 추후에 계속해서 같은 에러가 발생하지 않도록 예외처리를 해야 한다

<img src='./images/티케의 프론트엔드에서의 에러 핸들링/07.png'>

- 모든 에러를 모니터링하기 위해 센트리 도구를 활요할 수 있다

- 앞서 언급한 모든 에러를 try-catch를 해서 처리하는 것을 지양해야 한다

<img src='./images/티케의 프론트엔드에서의 에러 핸들링/08.png'>

- 가장 큰 이유로 catch에 넘어가는 에러가 분기 처리를 하지 않으면 무엇인지 명확히 알 수 없다는 점과

- 모든 예외 사항에 대해서 캐치를 했을 경우 사용자에게는 에러가 보이지 않겠지만 이는 오류를 해결하는 것이 아니라 숨기는 것에 불과하여 오히려 더 안좋은 길로 프로그래밍을 만들 수 있다

<img src='./images/티케의 프론트엔드에서의 에러 핸들링/09.png'>

- 만약 에러를 분리하기 위해 catch 안에서 rethrow를 하거나 중첩 try-catch를 하게 되면 나중에 어플리케이션이 꺼졌을 때도 코드의 가독성이 훨씬 떨어지게 된다

- 하지만 오른쪽 처럼 성공과 실페 케이스를 나눠서 작성하면 코드의 가독성이 좋아진다

<img src='./images/티케의 프론트엔드에서의 에러 핸들링/10.png'>

- 에러를 통해서 유의미한 결과를 내보낼 수 없다면, 서비스의 미래를 위해서 에러를 터트리고 우후에 모니터링을 통해서 원인을 찾아내는 것이 더 낫다

---

## Reference

- [티케의 프론트엔드에서의 에러 핸들링](https://www.youtube.com/watch?v=FXtooPhupr4)

- 참고자료

  - [클라이언트의 사용자 중심 예외 처리](https://jbee.io/react/error-declarative-handling-2/)

  - [효율적인 프런트엔드 에러 핸들링](https://jbee.io/react/error-declarative-handling-0/)

  - [에러 처리를 어떻게 하면 좋을까? - 1](https://www.rinae.dev/posts/how-to-handle-errors-1)

  - [ES6+ 비동기 프로그래밍과 실전 에러 핸들링](https://www.youtube.com/watch?v=o9JnT4sneAQ)
